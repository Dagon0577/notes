# 学习内容 2019-09-19
- [MySQL Group Replication的架构。掌握MGR的原理及其安装部署和使用。](#MGR)
- [掌握用从机的备份建立另一个从机](https://blog.51cto.com/634871/1364141)
- [5.6或更老版本默认配置的test库授权要如何回收。](#5.6或更老版本默认配置的test库授权要如何回收。)
- [空账号是怎么回事。](#空账号是怎么回事。)
## MGR

group replication实现的分布式数据库架构，底层的分布式基础是Paxos。通过Paxos来保证分布式数据库系统中，事务的提交顺序。

每次一个事务在一个节点提交的时候，就会发送所修改的数据到所有节点，检查期间是否有修改冲突（比如修改了别的节点已经修改并提交成功的事务的数据），如果发现冲突，本事务回滚。如果没有冲突，则可以直接提交成功。

对于非执行事务的远程节点，如果事务判断为执行成功，远程发送过来的数据，会被保存在本地的一个relay log里面（注意，与常规主从同步使用的relay log不是同一组），之后由从库的applier线程采用正常主从同步（目前已经支持LOGICAL_CLOCK并行执行）的方式执行掉对应的relay log。

这里有一个临界点，如果一个事务刚刚被写入relay log，还没有来得及执行掉，这时候有一个事务的执行涉及了相关的数据，那么后来的这个事务在执行阶段可以执行成功，但是必定会在提交阶段失败的。

部署流程：https://www.jianshu.com/p/ca1af156f656

相关链接 https://dev.mysql.com/doc/refman/5.7/en/group-replication-summary.html

## 5.6或更老版本默认配置的test库授权要如何回收。

这是 mysql 的默认规则，凡是名字以 test 这 4 个字母开头的 db，所有用户在这个库上都有管理员权限。所以为了安全，一般在装好 mysql 以后，都会删除 test 库。

## 空账号是怎么回事。

与任何用户名匹配的空值（空字符串）。具有空白用户名的帐户是匿名用户。要在SQL语句中指定匿名用户，请使用带引号的空用户名部分，例如''@'localhost'。